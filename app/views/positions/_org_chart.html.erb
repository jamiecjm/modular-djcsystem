<script type="text/javascript">
  google.charts.load('current', {packages:["orgchart"]});
  google.charts.setOnLoadCallback(drawChart);

  function drawChart() {
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'Name');
    data.addColumn('string', 'Manager');


    // For each orgchart box, provide the name, manager, and tooltip to show.
    var positions = JSON.parse('<%=raw(positions)%>');
    data.addRows(positions);

    var options = {
      allowHtml: true,
      allowCollapse: true,
      size: 'large'
    }

    // Create the chart.
    var chart = new google.visualization.OrgChart(document.getElementById('chart_div'));
    // Draw the chart, setting the allowHtml option to true for the tooltips.
    chart.draw(data, options);
  }
</script>