// html2canvas($('#chart'), {
// 	useCORS: true,
// 	letterRendering: true,
// 	backgroundColor: '#FFFFFF',
// 	onclone: function(canvas) {
// 		var myImage = canvas.toDataURL("image/png")
// 		$('#download_link').attr('href',myImage)
// 		document.getElementById('download_link').click();
// 	}
// });
$('#main_content').css('position', 'relative');
var window_width = $(window).width();
var chart_width = $('#chart').width();
var scale = window_width/chart_width;
var right = (chart_width - window_width)/2

$('#chart').css({
	'transform': 'scale('+ scale +')',
    'position': 'absolute',
    'right': '-'+ right +'px'
})

html2canvas($('#chart')[0], {
	useCORS: true,
	letterRendering: true,
	allowTaint: false,
	backgroundColor: '#FFFFFF'
}).then(function(canvas){
	var myImage = canvas.toDataURL("image/png")
	$('#download_link').attr('href',myImage)
	document.getElementById('download_link').click();
})

$('#main_content').css('position', 'initial');
$('#chart').css({
	'transform': 'none',
    'position': 'initial'
})